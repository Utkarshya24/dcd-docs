---
title: TCP Proxy & Public URLs
description: The **TCP Proxy** in dcdeploy allows you to expose workloads that communicate over **raw TCP protocols** (non-HTTP). This is especially useful for **databases, message brokers, and custom TCP-based services**. With **TCP Public URLs**, you can also securely connect to these services from outside dcdeploy.
---

---

## When to use TCP Proxy?

-  **Databases** – Expose PostgreSQL, MySQL, or Mongodb for internal/external access.  
-  **Message Brokers** – Kafka, RabbitMQ, or custom TCP services.  
-  **Custom Protocols** – Any app or service that doesn’t use HTTP/HTTPS.  

---

## Configuration

To configure a workload with **TCP Proxy**, set the `protocol` field to `tcp` in your `dcdeploy.yml`.

```yaml
services:
  postgres-db:
    type: app
    machineType: DCD-1
    regions: India
    image: postgres:16
    ports:
      - 5432
    minScale: 1
    maxScale: 1
    protocol: tcp
```
- ports → The TCP port your service listens on.
- protocol: tcp → Ensures the proxy forwards raw TCP traffic instead of HTTP.
- minScale / maxScale → Defines scaling limits (usually fixed for databases).

### Example: Mongo-db with TCP Proxy
```yaml

services:
  mongodb-db:
    type: app
    machineType: DCD-1
    regions: India
    image: mongodb:v6
    ports:
      - 6379
    minScale: 1
    maxScale: 1
    protocol: tcp
```    

### TCP Public URLs for Databases
When you set protocol: tcp, dcdeploy provisions a public TCP endpoint so you can connect to your database or TCP service from anywhere.

Format
```php

tcp://<service-name>.<region>.dcd.run:<port>
```
### Example:
```bash

tcp://postgres-db.india.dcd.run:5432
```
### PostgreSQL Example

```yaml

services:
  postgres-db:
    type: app
    machineType: DCD-1
    regions: India
    image: postgres:16
    ports:
      - 5432
    minScale: 1
    maxScale: 1
    protocol: tcp
```
Public endpoint after deployment:

```bash

tcp://postgres-db.india.dcd.run:5432
Connect with psql:
```
```bash

psql -h postgres-db.india.dcd.run -p 5432 -U admin -d mydb
```
Mysql Example
```yaml

services:
  mysql-db:
    type: app
    machineType: DCD-1
    regions: India
    image: mysql
    ports:
      - 6379
    minScale: 1
    maxScale: 1
    protocol: tcp
```    
Public endpoint:

```bash

tcp://mysql.india.dcd.run:6379
```
Connect with CLI:

```bash

mysql-cli -h mysql.india.dcd.run -p 6379
```
### Best practices
- Secure your database – Never leave databases open without authentication. Always set strong passwords.
- Restrict access – Use firewall rules or allow-list IPs if possible.
- Prefer private networking – For production workloads, use dcdeploy’s private VPC or service-to-service networking instead of exposing databases publicly.
- Use secrets to store credentials rather than hardcoding them in your dcdeploy.yml.

--- 

## Learn more
- [DCDeploy YAML](./dcdeploy-yml)  
- [Environment Variables](./environment-variables)  
- [Workload Types](./workload-types) 